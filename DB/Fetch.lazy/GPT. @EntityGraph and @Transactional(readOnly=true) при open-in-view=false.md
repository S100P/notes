–î–∞, –≤ **`open-in-view=false`** **–∏–º–µ–µ—Ç —Å–º—ã—Å–ª** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **`@Transactional(readOnly = true)` –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ + `@EntityGraph` –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**. –í–æ—Ç –ø–æ—á–µ–º—É:  

---

### **‚úÖ –ü–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç?**
#### 1Ô∏è‚É£ **`@Transactional(readOnly = true)` –≤ —Å–µ—Ä–≤–∏—Å–µ**
- **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å `LAZY` —Å–≤—è–∑–∏ **–±–µ–∑ –æ—à–∏–±–æ–∫ `LazyInitializationException`**.  
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π**:  
  - **Spring –æ—Ç–∫–ª—é—á–∞–µ—Ç `flush()`**, —É–º–µ–Ω—å—à–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Hibernate.  
  - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç "—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é" –≤ –ë–î** (–µ—Å–ª–∏ –µ—Å—Ç—å read-only —Ä–µ–ø–ª–∏–∫–∏).  
  - **–ë–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ Persistence Context**, —Å–Ω–∏–∂–∞—è –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.  

```java
@Service
public class AuthorService {
    private final AuthorRepository authorRepository;

    @Transactional(readOnly = true)
    public Author findById(Long id) {
        return authorRepository.findById(id)
                .orElseThrow(() -> new EntityNotFoundException("Author not found"));
    }
}
```

---

#### 2Ô∏è‚É£ **`@EntityGraph` –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
- –ü–æ–∑–≤–æ–ª—è–µ—Ç **Hibernate –∑–∞–≥—Ä—É–∑–∏—Ç—å `LAZY` —Å–≤—è–∑–∏ –∑–∞—Ä–∞–Ω–µ–µ** –≤ **–æ–¥–Ω–æ–º SQL-–∑–∞–ø—Ä–æ—Å–µ** (–∞–Ω–∞–ª–æ–≥ `JOIN FETCH`).  
- –ò–∑–±–µ–≥–∞–µ—Ç **N+1 –ø—Ä–æ–±–ª–µ–º—ã** (Hibernate –Ω–µ –¥–µ–ª–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç).  
- –†–∞–±–æ—Ç–∞–µ—Ç **–¥–∞–∂–µ –ø—Ä–∏ `FetchType.LAZY`**.  

```java
@Repository
public interface AuthorRepository extends JpaRepository<Author, Long> {

    @EntityGraph(attributePaths = {"books", "publishers"})
    Optional<Author> findById(Long id);
}
```

---

### **üî• –ò—Ç–æ–≥: –ø–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞?**
‚úÖ **`@Transactional(readOnly = true)`** **–æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É `LAZY`** —Å–≤—è–∑–µ–π –ø—Ä–∏ `open-in-view=false`.  
‚úÖ **`@EntityGraph`** **–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Å–≤—è–∑–∏ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ** –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç `LazyInitializationException`.  
‚úÖ **–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, –∞ Hibernate —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ. üöÄ

---
–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è, –∑–∞—á–µ–º **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ `@Transactional(readOnly = true)` –∏ `@EntityGraph`**, –µ—Å–ª–∏ –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö —É–∂–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É `LazyInitializationException`.  

---

## **1Ô∏è‚É£ `@EntityGraph` –∏ `LAZY` —Å–≤—è–∑–∏ –ø—Ä–∏ `open-in-view=false`**  
–î–∞, **`@EntityGraph` —Å–∞–º –ø–æ —Å–µ–±–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É `LazyInitializationException`**, –∑–∞–≥—Ä—É–∂–∞—è `LAZY` —Å–≤—è–∑–∏ **–∑–∞—Ä–∞–Ω–µ–µ** –≤ –æ–¥–Ω–æ–º SQL-–∑–∞–ø—Ä–æ—Å–µ.  
üîπ **–ü–ª—é—Å**: –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç **N+1 –ø—Ä–æ–±–ª–µ–º—É** –∏ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º.  
üîπ **–ú–∏–Ω—É—Å**: –†–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–µ —Å–≤—è–∑–∏** (`attributePaths`).  

**–ü—Ä–∏–º–µ—Ä:**  
```java
@EntityGraph(attributePaths = {"books", "publishers"})
Optional<Author> findById(Long id);
```
üìå **–ï—Å–ª–∏ —Å–≤—è–∑—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ `@EntityGraph`, —Ç–æ `LAZY` –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç** –∏ Hibernate –≤—ã–¥–∞—Å—Ç `LazyInitializationException` (–ø—Ä–∏ `open-in-view=false`).  

---

## **2Ô∏è‚É£ `@Transactional(readOnly = true)` –∏ `LAZY` —Å–≤—è–∑–∏**  
–ö–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º **`@Transactional(readOnly = true)`**, **Spring –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞ –≤–µ—Å—å –º–µ—Ç–æ–¥**, –∞ –∑–Ω–∞—á–∏—Ç:  
‚úÖ Hibernate **–º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å `LAZY` —Å–≤—è–∑–∏ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤ —Ä–∞–º–∫–∞—Ö –º–µ—Ç–æ–¥–∞** (–±–µ–∑ `LazyInitializationException`).  
‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –º–µ—Ç–æ–¥–∞**, —Ç–∞–∫ —á—Ç–æ `Session` –æ—Å—Ç–∞–µ—Ç—Å—è **–∞–∫—Ç–∏–≤–Ω–æ–π**.  
‚úÖ **–ù–æ!** –ï—Å–ª–∏ `LAZY` —Å–≤—è–∑–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, **–º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å `N+1 –ø—Ä–æ–±–ª–µ–º–∞`**.  

**–ü—Ä–∏–º–µ—Ä:**  
```java
@Transactional(readOnly = true)
public Author getAuthor(Long id) {
    return authorRepository.findById(id).orElseThrow();
}
```
üìå **–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å `author.getBooks()`, —Ç–æ Hibernate —Å–¥–µ–ª–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å.**  

---

## **3Ô∏è‚É£ –ü–æ—á–µ–º—É `@Transactional(readOnly = true)` –∏ `@EntityGraph` –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ?**  
### **1. `@EntityGraph` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç N+1 –ø—Ä–æ–±–ª–µ–º—É**  
- **–ë–µ–∑ `@EntityGraph`** Hibernate –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –¥–ª—è `LAZY` –∫–æ–ª–ª–µ–∫—Ü–∏–π.  
- **–° `@EntityGraph`** `LAZY` —Å–≤—è–∑–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–≤ –æ–¥–Ω–æ–º SQL-–∑–∞–ø—Ä–æ—Å–µ** (–ª—É—á—à–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏).  

### **2. `@Transactional(readOnly = true)` –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç `LazyInitializationException`**  
- **–ï—Å–ª–∏ –≤–¥—Ä—É–≥ `@EntityGraph` –Ω–µ —É–∫–∞–∑–∞–Ω** –∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Å–≤—è–∑–∏, —Ç–æ `@Transactional(readOnly = true)` **–æ—Å—Ç–∞–≤–∏—Ç —Å–µ—Å—Å–∏—é –æ—Ç–∫—Ä—ã—Ç–æ–π**, –∏ Hibernate **—Å–º–æ–∂–µ—Ç –ø–æ–¥—Ç—è–Ω—É—Ç—å `LAZY` –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é**.  

### **3. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç —Å –∫—ç—à–µ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é**  
- `@Transactional(readOnly = true)` **–∏–∑–±–µ–≥–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö `flush()`**, –∞ –∑–Ω–∞—á–∏—Ç, —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É.  
- **–í–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Hibernate –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 1-–π —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞**, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.  

---

## **üî• –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: `@Transactional(readOnly = true) + @EntityGraph`**
```java
@Service
public class AuthorService {
    private final AuthorRepository authorRepository;

    @Transactional(readOnly = true)
    public Author getAuthor(Long id) {
        return authorRepository.findByIdWithBooksAndPublishers(id)
                .orElseThrow(() -> new EntityNotFoundException("Author not found"));
    }
}
```

```java
@Repository
public interface AuthorRepository extends JpaRepository<Author, Long> {
    @EntityGraph(attributePaths = {"books", "publishers"})
    Optional<Author> findByIdWithBooksAndPublishers(Long id);
}
```

---

## **üéØ –ò—Ç–æ–≥: –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**
| –°–∏—Ç—É–∞—Ü–∏—è | `@EntityGraph` | `@Transactional(readOnly = true)` | –ù—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞? |
|----------|---------------|---------------------------------|---------------------------|
| `open-in-view=false`, –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å `LAZY` —Å–≤—è–∑–∏ | ‚úÖ | üö´ (–º–æ–∂–Ω–æ, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) | **–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@EntityGraph`** |
| `open-in-view=false`, –Ω–æ `@EntityGraph` –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Å–≤—è–∑–∏ | ‚úÖ | ‚úÖ | **–ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞!** |
| –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ `@Query` | üö´ | ‚úÖ | **–ù—É–∂–Ω–æ `@Transactional(readOnly = true)`** |
| –ù—É–∂–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã | ‚úÖ | ‚úÖ | **–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** üöÄ |

### **üí°–í—ã–≤–æ–¥**  
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤–º–µ—Å—Ç–µ ‚Äî —ç—Ç–æ –ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞**.  
- **`@EntityGraph` –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã** –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç `N+1 –ø—Ä–æ–±–ª–µ–º—É`.  
- **`@Transactional(readOnly = true)` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ `LAZY` —Å–≤—è–∑–∏ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å**, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ `@EntityGraph`.  

‚û° **–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@EntityGraph`, –Ω–æ `@Transactional(readOnly = true)` –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É**.
